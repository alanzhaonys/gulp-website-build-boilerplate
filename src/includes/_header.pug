header
  #top-bar
    .container.h-100
      .row.h-100
        .col.col-12.h-100.d-flex.align-items-center.justify-content-center.justify-content-lg-end.flex-row
          if enableIsi
            a.toggle-isi(href=(disableIsiPageSlugs.includes(pageSlug) ? '/isi' : '#') onclick=(disableIsiPageSlugs.includes(pageSlug) ? '' : 'return false'))
              | Important Site Information
          a(href='/')
            | Top Bar Link 2
          if enableSiteSearch
            button.d-none.d-lg-block.search-button Search

  #main-nav.d-flex.align-items-center
    .container
      .row.d-flex.justify-content-between
        .col.col-4.col-lg-2.d-flex.align-items-center.justify-content-start.p-lg-0
          a(href='/')
            img.main-logo(srcset='http://via.placeholder.com/140x80, http://via.placeholder.com/280x160 2x' alt='Main Logo')

        .col.col-8.col-lg-10.d-flex.align-items-center.justify-content-end.p-lg-0
          //-
          //- Desktop nav start here
          //-
          nav#desktop-nav.d-none.d-lg-flex.align-items-center
            ul.menu
              each page, key in menu_config
                li
                  - var activeClass = (pageSlug === key || parentSlug === key) ? 'active ' : ''
                  a(href=(page.submenu ? '#' : page.href) onclick=(page.submenu ? 'return false' : '') class=activeClass)!= page.label

                  //- Level 1 submenu
                  if page.submenu
                    ul.submenu.submenu1
                      each page1, key1 in page.submenu
                        li
                          - var activeClass1 = (pageSlug === key1 || parentSlug === key1) ? 'active ' : ''
                          a(href=(page1.submenu ? '#' : page1.href) onclick=(page1.submenu ? 'return false' : '') class=activeClass1)!= page1.label

                          //- Level 2 submenu
                          if page1.submenu
                            ul.submenu.submenu2
                              each page2, key2 in page1.submenu
                                li
                                  - var activeClass2 = (pageSlug === key2) ? 'active ' : ''
                                  a(href=page2.href class=activeClass2)!= page2.label

          button.hamburger.hamburger--spin-r.d-lg-none(type='button' aria-label='Menu' aria-controls='mobile-nav' aria-expanded='false')

            span.hamburger-box
              span.hamburger-inner

  if enableSiteSearch
    .container.d-none.d-lg-block
      .row
        .col.col-12
          form.site-search-form(method="get" action="/search")
            .p-4
              input.keywords(type="search" name="keywords")
              input(type="submit" value="Search")
              a.cancel(href="#" onclick="return false") Cancel

  //-
  //- Mobile nav starts here
  //-
  nav#mobile-nav.flex-column.d-lg-none
    .container
      .row
        .col.col-12
          form.site-search-form.d-flex(method="get" action="/search")
            input.keywords.flex-fill(type="search" name="keywords")
            input(type="submit" value="Search")

          ul.menu
            each page, key in menu_config
              li

                //- Determine if level 1 submenu should be expanded
                - var expandedClass = ''
                - var expandableClass = ''
                if page.submenu
                  - expandableClass = 'expandable'
                  each page1, key1 in page.submenu
                    if (pageSlug === key1 || parentSlug === key1)
                      //- should be initially expanded
                      - expandedClass = 'expanded'

                - var activeClass = (pageSlug === key || parentSlug === key) ? 'active' : ''
                a(href=(page.submenu ? '#' : page.href) onclick=(page.submenu ? 'return false' : '') class=activeClass + ' ' + expandableClass + ' ' + expandedClass)!= page.label

                //- Level 1 submenu
                if page.submenu
                  ul.submenu.submenu1
                    each page1, key1 in page.submenu
                      li

                        //- Determine if level 2 submenu should be expanded
                        - var expandedClass1 = ''
                        - var expandableClass1 = ''
                        if page1.submenu
                          - expandableClass1 = 'expandable'
                          each page2, key2 in page1.submenu
                            if (pageSlug === key2 || parentSlug === key2)
                              //- should be initially expanded
                              - expandedClass1 = 'expanded'

                        - var activeClass1 = (pageSlug === key1 || parentSlug === key1) ? 'active ' : ''
                        a(href=(page1.submenu ? '#' : page1.href) onclick=(page1.submenu ? 'return false' : '') class=activeClass1 + ' ' + expandableClass1 + ' ' + expandedClass1)!= page1.label

                        //- Level 2 submenu
                        if page1.submenu
                          ul.submenu.submenu2
                            each page2, key2 in page1.submenu
                              li
                                - var activeClass2 = (pageSlug === key2) ? 'active ' : ''
                                a(href=page2.href class=activeClass2)!= page2.label

